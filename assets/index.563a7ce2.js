import{i as e}from"./vendor.7a58746f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={inkVersion:20,root:[[{"->":"intro"},["done",{"#n":"g-0"}],null],"done",{intro:[[{"#":"LOCATION: Your office"},{"#":"PICTURE: office_me"},"^Buzzing intercom","\n",["ev",{"^->":"intro.0.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0",flg:18},{s:["^– Yes ?",{"->":"$r",var:!0},null]}],{"c-0":["ev",{"^->":"intro.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"\n","^– Come in here !","\n","ev",!0,"/ev",{"VAR=":"BossIsWaiting",re:!0},{"->":".^.^.g-0"},{"#f":5}],"g-0":["^This is your boss calling. His office is west, opposite the corridor.","\n","^(Exits are listed on the top right corner)","\n",["ev","str","^exit: West","/str","/ev",{"*":".^.c-1",flg:4},{"c-1":["\n","^You open the door and gets to the corridor.","\n",{"->":"office_corridor"},null],"#n":"opts"}],null]}],null],office_corridor:[[{"#":"LOCATION: Corridor"},{"#":"PICTURE: corridor"},"^West is your boss office. Yours is east.","\n","^South the corridor leads to the street exit.","\n",["ev","str","^exit: West","/str","/ev",{"*":".^.c-0",flg:4},"ev","str","^exit: East","/str",{"VAR?":"BossIsWaiting"},"/ev",{"*":".^.c-1",flg:5},"ev","str","^exit: East","/str",{"VAR?":"BossIsWaiting"},"!","/ev",{"*":".^.c-2",flg:5},"ev","str","^exit: South","/str",{"VAR?":"BossIsWaiting"},"/ev",{"*":".^.c-3",flg:5},"ev","str","^exit: South","/str",{"VAR?":"BossIsWaiting"},"!","/ev",{"*":".^.c-4",flg:5},{"c-0":["\n","^You enter your boss' office.","\n",{"->":"office_boss"},null],"c-1":["\n","^You better hurry. Your boss expects you.","\n",{"->":".^.^"},null],"c-2":["\n","^You enter your own office.","\n",{"->":"office_me"},null],"c-3":["\n","^Yes, you could quit, just like that.","\n","^But no, you need this job.","\n",{"->":".^.^"},null],"c-4":["\n","^You take the stairs down to the street.","\n",{"->":"street"},null],"#n":"opts"}],null],null],office_boss:[{"#":"LOCATION: Your boss' office"},{"#":"PICTURE: office_boss"},"ev",{"VAR?":"BossIsWaiting"},"/ev",[{"->":".^.b",c:!0},{b:["\n","^You boss is here. He's looking impatient.","\n",{"->":".^.^.^.initial"},{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{b:["\n",{"->":".^.^.^.classic"},{"->":".^.^.^.7"},null]}],"nop","\n",{initial:[[["ev",{"^->":"office_boss.initial.0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0",flg:18},{s:["^– What can I do for you, sir ?",{"->":"$r",var:!0},null]}],{"c-0":["ev",{"^->":"office_boss.initial.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^– Listen, I need you to find a birthday gift for my wife. We meet for dinner in 2h.","\n",["ev",{"^->":"office_boss.initial.0.g-0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","str","^I even supposed to buy for her ?","/str","/ev",{"*":".^.^.c-1",flg:22},{s:["^– And what am ",{"->":"$r",var:!0},null]}],{"c-1":["ev",{"^->":"office_boss.initial.0.g-0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"^...","\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":["^Your boss does not have the time to listen to your protesting. He never has. His reply is prompt :","\n","^<h3>« You'll think of something. »</h3>","\n","^Text and code by Ju/smwhr ©2021","\n","^Release 2 / Serial number 290821 / ink 1.0 (inkjs/v2.0)","\n","ev","str","^(After all, you always do...)","/str","/ev",{"*":".^.c-2",flg:20},{"c-2":["\n",{"->":".^.^.^.g-2"},{"#f":5}]}],"g-2":["^He hands you his keys. And just like that he's off to a meeting.","\n","^You are back in the corridor.","\n","ev",!1,"/ev",{"VAR=":"BossIsWaiting",re:!0},{"->":"office_corridor"},null]}],null],classic:[["^Windows are overlooking a busy parisian street. The desk is immaculate","ev",{"VAR?":"HasPhotoMis"},"!","/ev",[{"->":".^.b",c:!0},{b:["^ except for a single",{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{b:["^. There was a",{"->":".^.^.^.7"},null]}],"nop","^ photo of a long-haired blonde woman horse riding","ev",{"VAR?":"HasPhotoMis"},"/ev",[{"->":".^.b",c:!0},{b:["^ here before",{"->":".^.^.^.13"},null]}],"nop","^.","\n","ev",!0,"/ev",{"VAR=":"KnowPhotoWife",re:!0},["ev","str","^exit: East","/str","/ev",{"*":".^.c-0",flg:4},"ev","str","^Take the photograph","/str",{"VAR?":"NeedPhoto"},{"VAR?":"HasPhotoMis"},"!","&&","/ev",{"*":".^.c-1",flg:5},{"c-0":["\n","^You go back to the corridor.","\n",{"->":"office_corridor"},null],"c-1":["\n","^You take the photograph, the woman from the shop will be happy.","\n","ev",!0,"/ev",{"VAR=":"HasPhotoMis",re:!0},{"->":".^.^"},null],"#n":"opts"}],null],null]}],office_me:[[{"#":"LOCATION: Your office"},{"#":"PICTURE: office_me"},"^This is the smallest room in all the office but at least you have a personal space.","\n","ev",{"VAR?":"KnowBossAddress"},"!","/ev",[{"->":".^.b",c:!0},{b:["\n","^There's a list of all personel addresses here.","\n",{"->":".^.^.^.9"},null]}],"nop","\n",[["ev",{"^->":"office_me.0.opts.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"VAR?":"KnowBossAddress"},"!","/ev",{"*":".^.^.c-0",flg:3},{s:["^Look over the list",{"->":"$r",var:!0},null]}],"ev","str","^exit: West","/str","/ev",{"*":".^.c-1",flg:4},{"c-0":["ev",{"^->":"office_me.0.opts.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","ev",!0,"/ev",{"VAR=":"KnowBossAddress",re:!0},"^You find your boss' address : 14 rue Lagrenouille in the 11th arrondissement","\n",{"->":".^.^"},null],"c-1":["\n","^You exit to the corridor.","\n",{"->":"office_corridor"},"end",null],"#n":"opts"}],null],null],street:[[{"#":"LOCATION: Rue du Temple"},{"#":"PICTURE: street"},"^You are in a busy parisian street. There are some stores to the south, and the home of your boss is ","ev",{"VAR?":"KnowBossAddress"},"!","/ev",[{"->":".^.b",c:!0},{b:["^somewhere",{"->":".^.^.^.8"},null]}],"nop","^ east.","\n",["ev","str","^exit: North","/str","/ev",{"*":".^.c-0",flg:4},"ev","str","^exit: South","/str","/ev",{"*":".^.c-1",flg:4},"ev","str","^exit: East","/str",{"VAR?":"KnowBossAddress"},"!","/ev",{"*":".^.c-2",flg:5},"ev","str","^exit: East","/str",{"VAR?":"KnowBossAddress"},"/ev",{"*":".^.c-3",flg:5},{"c-0":["\n","^You get back to the office.","\n",{"->":"office_corridor"},null],"c-1":["\n","^You walk south.","\n",{"->":"panoramas"},null],"c-2":["\n","^You don't know the exact address. You're afraid to get lost.","\n",{"->":".^.^"},null],"c-3":["\n","^You reach the 14 rue Lagrenouille after a 15 minutes walk.","\n",{"->":"street_door"},null],"#n":"opts"}],null],null],street_door:[[{"#":"LOCATION: 14 rue Lagrenouille"},{"#":"PICTURE: street_door"},"^You are in a very fancy and hipster neighborhood.","\n",["ev","str","^exit: West","/str","/ev",{"*":".^.c-0",flg:4},"ev","str","^exit: Up","/str","/ev",{"*":".^.c-1",flg:4},{"c-0":["\n","^You walk back to Rue du Temple","\n",{"->":"street"},null],"c-1":["\n","^Using you boss' key, you let yourself in and climb upstairs.","\n",{"->":"apartment"},null],"#n":"opts"}],null],null],apartment:[[{"#":"LOCATION: 14 rue Lagrenouille (upstairs)"},{"#":"PICTURE: apartment"},"^This is not your first time here. The apartment is huge but you never went past the vestibule.","\n","^On the wall ","ev",{"VAR?":"KnowPhotoWife"},"!","/ev",[{"->":".^.b",c:!0},{b:["^ you notice the",{"->":".^.^.^.11"},null]}],[{"->":".^.b"},{b:["^there ","ev",{"VAR?":"HasPhotoWife"},"/ev",[{"->":".^.b",c:!0},{b:["^ used to be",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{b:["^is",{"->":".^.^.^.6"},null]}],"nop","^ a",{"->":".^.^.^.11"},null]}],"nop","^ picture of a short-haired, blonde woman, practicing yoga.","\n","ev",!0,"/ev",{"VAR=":"KnowPhotoWife",re:!0},["ev","str","^exit: Down","/str","/ev",{"*":".^.c-0",flg:4},"ev","str","^Take the photograph","/str",{"VAR?":"NeedPhoto"},{"VAR?":"HasPhotoWife"},"!","&&","/ev",{"*":".^.c-1",flg:5},{"c-0":["\n","^You get back to the street.","\n",{"->":"street_door"},null],"c-1":["\n","^You take the photograph, the woman from the shop will be happy.","\n","ev",!0,"/ev",{"VAR=":"HasPhotoWife",re:!0},{"->":".^.^"},null],"#n":"opts"}],null],null],panoramas:[[{"#":"LOCATION: Passage des Panoramas"},{"#":"PICTURE: panoramas"},"^You are in Passage des Panoramas. Paris in august : everything is closed ","ev",{"VAR?":"ShopOpen"},"/ev",[{"->":".^.b",c:!0},{b:["^ except for one",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{b:["^even the",{"->":".^.^.^.8"},null]}],"nop","^ strange shop east.","\n",["ev","str","^exit: North","/str",{"VAR?":"Gift"},"str","^no","/str","==","/ev",{"*":".^.c-0",flg:5},"ev","str","^exit: North","/str",{"VAR?":"Gift"},"str","^no","/str","!=","/ev",{"*":".^.c-1",flg:5},"ev","str","^exit: East","/str",{"VAR?":"ShopOpen"},"/ev",{"*":".^.c-2",flg:5},"ev","str","^exit: East","/str",{"VAR?":"ShopOpen"},"!","/ev",{"*":".^.c-3",flg:5},{"c-0":["\n","^You get back to your office's street.","\n",{"->":"street"},null],"c-1":["\n",{"->":"ending_scene"},null],"c-2":["\n","^You enter the shop.","\n",{"->":"shop"},null],"c-3":["\n","^The shop is now closed.","\n",{"->":".^.^"},null],"#n":"opts"}],null],null],shop:[{"#":"LOCATION: Strange shop"},{"#":"PICTURE: shop"},"^A woman smiles behing the counter.","\n","ev",{"CNT?":".^"},1,"==","/ev",[{"->":".^.b",c:!0},{b:["\n",{"->":"shop.initial"},{"->":"shop.11"},null]}],[{"->":".^.b"},{b:["\n",{"->":"shop.photo_choice"},{"->":"shop.11"},null]}],"nop","\n",{initial:[["^– What can I do for you ?","\n",["ev",{"^->":"shop.initial.0.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0",flg:2},{s:["^– I want something for me",{"->":"$r",var:!0},null]}],["ev",{"^->":"shop.initial.0.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1",flg:2},{s:["^– I want something for my boss's wife",{"->":"$r",var:!0},null]}],{"c-0":["ev",{"^->":"shop.initial.0.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"\n","ev","str","^me","/str","/ev",{"->":"shop.gift_receive_for"},null],"c-1":["ev",{"^->":"shop.initial.0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"\n","^– I need a picture of her","\n","ev",!0,"/ev",{"VAR=":"NeedPhoto",re:!0},{"->":"shop.photo_choice"},null]}],null],photo_choice:[["^– Did you find a photo ?","\n",[["ev",{"^->":"shop.photo_choice.0.opts.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"VAR?":"HasPhotoWife"},"!",{"VAR?":"HasPhotoMis"},"!","&&","/ev",{"*":".^.^.c-0",flg:19},{s:["^Maybe I can find one on facebook...",{"->":"$r",var:!0},null]}],["ev",{"^->":"shop.photo_choice.0.opts.1.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"VAR?":"KnowPhotoMis"},{"VAR?":"KnowPhotoWife"},"||",{"VAR?":"HasPhotoMis"},"!",{"VAR?":"HasPhotoWife"},"!","&&","&&","/ev",{"*":".^.^.c-1",flg:3},{s:["^I know where I can find one...",{"->":"$r",var:!0},null]}],["ev",{"^->":"shop.photo_choice.0.opts.2.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"VAR?":"HasPhotoMis"},"/ev",{"*":".^.^.c-2",flg:3},{s:["^Hand the photo of the woman horse-riding",{"->":"$r",var:!0},null]}],["ev",{"^->":"shop.photo_choice.0.opts.3.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str",{"VAR?":"HasPhotoWife"},"/ev",{"*":".^.^.c-3",flg:3},{s:["^Hand the photo of the woman practicing yoga",{"->":"$r",var:!0},null]}],["ev",{"^->":"shop.photo_choice.0.opts.4.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","choiceCnt",0,"==","/ev",{"*":".^.^.c-4",flg:3},{s:["^– No...",{"->":"$r",var:!0},null]}],{"c-0":["ev",{"^->":"shop.photo_choice.0.opts.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^You search but find nothing.","\n",{"->":"shop.please_come_back"},{"#f":5}],"c-1":["ev",{"^->":"shop.photo_choice.0.opts.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.1.s"},[{"#n":"$r2"}],"\n",{"->":"shop.please_come_back"},null],"c-2":["ev",{"^->":"shop.photo_choice.0.opts.c-2.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.2.s"},[{"#n":"$r2"}],"\n","ev","str","^mis","/str","/ev",{"->":"shop.gift_receive_for"},null],"c-3":["ev",{"^->":"shop.photo_choice.0.opts.c-3.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.3.s"},[{"#n":"$r2"}],"\n","ev","str","^wife","/str","/ev",{"->":"shop.gift_receive_for"},null],"c-4":["ev",{"^->":"shop.photo_choice.0.opts.c-4.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.4.s"},[{"#n":"$r2"}],"\n",{"->":"shop.please_come_back"},null],"#n":"opts"}],null],null],please_come_back:["^– Ok, then come back when you do !","\n","^She shows you the door to exit the shop.","\n",{"->":"panoramas"},null],gift_receive_for:[{"temp=":"person"},["ev",{"VAR?":"person"},"/ev",{"VAR=":"Gift",re:!0},"^She looks at ","ev",{"VAR?":"person"},"str","^me","/str","==","/ev",[{"->":".^.b",c:!0},{b:["^ you",{"->":".^.^.^.14"},null]}],[{"->":".^.b"},{b:["^the picture",{"->":".^.^.^.14"},null]}],"nop","^ with intensity and runs to the back shop.","\n","^When she comes back she hands you a wrapped package.","\n","^– Here, this is the perfect gift.","\n",["ev",{"^->":"shop.gift_receive_for.1.21.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-0",flg:18},{s:["^– What is it ?",{"->":"$r",var:!0},null]}],{"c-0":["ev",{"^->":"shop.gift_receive_for.1.c-0.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.21.s"},[{"#n":"$r2"}],"\n","^– I can't tell you, but trust me it is the most perfect gift.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[["ev",{"^->":"shop.gift_receive_for.1.g-0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1",flg:18},{s:["^– How much do I owe you ?",{"->":"$r",var:!0},null]}],{"c-1":["ev",{"^->":"shop.gift_receive_for.1.g-0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n","^– Nothing now, come back when it is open and pay me then. Good bye.","\n","^She leads you to the exit and closes the shop behind you.","\n","ev",!1,"/ev",{"VAR=":"ShopOpen",re:!0},{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":[{"->":"panoramas"},null]}],null],"#f":1}],ending_scene:[["^Your phone rings. This is your boss.","\n","ev","str","^Answer","/str","/ev",{"*":".^.c-0",flg:20},{"c-0":["\n","^– Where are you ?? I'm waiting for you at the restaurant.","\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":[["ev",{"^->":"ending_scene.0.g-0.0.$r1"},{"temp=":"$r"},"str",{"->":".^.s"},[{"#n":"$r1"}],"/str","/ev",{"*":".^.^.c-1",flg:18},{s:["^– Let me jump into a cab !",{"->":"$r",var:!0},null]}],{"c-1":["ev",{"^->":"ending_scene.0.g-0.c-1.$r2"},"/ev",{"temp=":"$r"},{"->":".^.^.0.s"},[{"#n":"$r2"}],"\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":["^The ride is fast.","\n",[{"#":"LOCATION: Restaurant"},{"#":"PICTURE: restaurant"},"^Your boss is waiting on the curb.","\n","ev","str","^Hand over the gift","/str","/ev",{"*":".^.c-2",flg:20},{"c-2":["\n","^– There it is !","\n","^He takes it without a thank you.","\n",{"->":".^.^.^.^.g-3"},{"#f":5}],"#n":"g-2"}],null],"g-3":["ev","str","^Sneak on them","/str","/ev",{"*":".^.c-3",flg:20},{"c-3":["\n","^You sneak a peak while your boss gets back to its table.","\n",{"->":".^.^.^.g-4"},{"#f":5}]}],"g-4":["ev",{"VAR?":"Gift"},"str","^mis","/str","==","/ev",[{"->":".^.b",c:!0},{b:["^ You have a bad feeling as you realize the woman sitted in front of him is not the one from the picture you gave earlier.",{"->":".^.^.^.8"},null]}],"nop","\n","ev",{"VAR?":"Gift"},"str","^wife","/str","==","/ev",[{"->":".^.b",c:!0},{b:["\n","^The lady is very pleased with the gift.","\n","^Once more, you saved the day.","\n",{"->":".^.^.^.18"},null]}],"nop","\n","ev",{"VAR?":"Gift"},"str","^mis","/str","==","/ev",[{"->":".^.b",c:!0},{b:["\n","^The lady gets suddenly angry, throws wine at your boss and leaves.","\n","^How will you handle the incident tomorrow ?","\n","^I guess... you'll think of something !","\n",{"->":".^.^.^.28"},null]}],"nop","\n","ev",{"VAR?":"Gift"},"str","^me","/str","==","/ev",[{"->":".^.b",c:!0},{b:["\n","^The lady looks nonplussed by the gift. But the sellers was right. This is truly the perfect gift for you.","\n","^How will you take it back ?","\n","^I guess... you'll think of something !","\n",{"->":".^.^.^.38"},null]}],"nop","\n",["ev","str","^Try something else ? (this will restart the game)","/str","/ev",{"*":".^.c-4",flg:4},{"c-4":["\n",{"#":"RESTART"},"end",null],"#n":"g-5"}],null]}],null],"global decl":["ev",!1,{"VAR=":"BossIsWaiting"},!1,{"VAR=":"KnowPhotoMis"},!1,{"VAR=":"HasPhotoMis"},!1,{"VAR=":"KnowPhotoWife"},!1,{"VAR=":"HasPhotoWife"},!1,{"VAR=":"NeedPhoto"},!0,{"VAR=":"ShopOpen"},"str","^no","/str",{"VAR=":"Gift"},!1,{"VAR=":"KnowBossAddress"},"/ev","end",null]}],listDefs:{}},o={apartment:"assets/apartment.66c5710d.png",corridor:"assets/corridor.fccf4c1a.png",cover:"assets/cover.5edc045c.png",office_boss:"assets/cover.5edc045c.png",office_me:"assets/office_me.0c1c903a.png",panoramas:"assets/panoramas.66da9a74.png",restaurant:"assets/restaurant.0bdb4a7a.png",shop:"assets/shop.f0a5e840.png",street_door:"assets/street_door.cd5aaf85.png",street:"assets/street.8c93f866.png",terrasse:"assets/terrasse.c9833769.png"};(async function(){const e=Object.entries(o);let t=0;const n=document.querySelector("#loading_pct"),s=1/e.length*100,r=e.map((([e,o])=>{let r,i;const l=new Promise(((e,t)=>{r=e,i=t})),a=new Image;return a.onload=function(){a.width=480,a.height=320,r([e,a])},a.onerror=function(){i(`Error loading ${e} at ${o}`)},a.src=o,l.then((e=>(t+=s,n.innerHTML=100==t?"Ready !":`${t.toFixed(1)}%`,e)))}));return Promise.all(r)})().then((o=>{setTimeout((()=>function(o){const n=document.querySelector("#app"),s='<svg viewBox="0 0 512 512"><path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z" fill="#2c3e50"></path></svg>',r=new e.exports.Story(t),l=o.cover;n.innerHTML=`\n  <div id="container">\n    <div id="status">\n       <div id="location">Inkjam 2021</div>\n       <div id="exits">\n         ${s}<ul>\n           <li><a href="https://smwhr.itch.io/" target="_blanck">itch.io</a></li>\n           <li><a href="https://smwhr.net/" target="_blanck">about</a></li>\n         </ul>\n       </div>\n    </div>\n    <div id="picture">\n      ${l.outerHTML}\n    </div>\n    <div id="text">\n      <div id="story"></div>\n      <div id="choices"></div>\n    </div>\n  </div>\n  `;const a=document.querySelector("#picture"),c=a.querySelector("img");a.style.minHeight=`${c.clientHeight}px`,r.onError=(e,t)=>{console.log(t,e)},i(n,r,o)}(Object.fromEntries(o))),1e3)}));function n(e,t){t.classList.add("hide"),setTimeout((function(){t.classList.remove("hide")}),e)}function s(e){const t=document.querySelector("#picture");e.classList.remove("hide"),e.style.position="absolute",e.style.top="0",t.prepend(e);t.querySelectorAll("img").forEach(((e,t)=>{if(0==t)return;const o=e;1==t?(o.classList.add("hide"),setTimeout((()=>{o.classList.contains("hide")&&o.remove()}),400)):o.remove()}))}function r(e,t,o){t.ResetState(),s(o.cover),i(e,t,o)}function i(e,t,l){var a=e.querySelector("#status > #location"),c=e.querySelector("#status > #exits > ul"),h=e.querySelector("#story"),u=e.querySelector("#choices");let f=0;for(;t.canContinue;){const v=t.Continue(),d=t.currentTags;let g=!1;if(d&&d.forEach((n=>{const[i,f]=n.split(":",2).map((e=>e.trim()));"PICTURE"==i&&f in o&&s(l[f]),"LOCATION"==i&&(a.innerHTML=`${f}`),"CLEAR"!=i&&"RESTART"!=i||(h.innerHTML="",c.innerHTML="",u.innerHTML="","RESTART"==i&&(a.innerHTML="Inkjam 2021",g=!0,r(e,t,l)))})),g)return;if(v){var p=document.createElement("p");p.innerHTML=v,h.appendChild(p),n(f,p),f+=200}t.currentChoices.forEach((function(o){const s=o.text,r=o=>{var n;if(o.preventDefault(),!(o.target instanceof HTMLElement))return;let s=parseInt(null!=(n=o.target.dataset.choiceIndex)?n:"8");c.innerHTML="",u.innerHTML="",t.ChooseChoiceIndex(s),i(e,t,l),h.scrollTo(0,h.scrollHeight)};if("exit:"==s.substr(0,5)){var a=document.createElement("li");a.innerHTML=`<a href='#' data-choice-index='${o.index}'>${s.substr(5)}</a>`,c.appendChild(a),a.querySelectorAll("a").forEach((e=>{e.addEventListener("click",r)}))}else{var p=document.createElement("p");p.classList.add("choice"),p.innerHTML=`<a href='#' data-choice-index='${o.index}'>${s}</a>`,u.appendChild(p),p.querySelectorAll("a").forEach((e=>{e.addEventListener("click",r)})),n(f,p),f+=200}document.querySelectorAll("a[data-choice-index='0']").forEach((e=>{e instanceof HTMLElement&&e.focus()}))}))}if(0==c.children.length){var v=document.createElement("li");v.innerHTML="<span>No exit</span>",c.appendChild(v)}}
